<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>최후의 날</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>

        body {
            background-color: #0c0c0e;
            color: #e0e0e0;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            overflow-x: hidden; /* 가로 스크롤 방지 */
            overflow-y: hidden; /* 전체 페이지 스크롤 비활성화 */
        }

        /* 화면 전체에 비네팅 효과 추가 */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0) 50%, rgba(0,0,0,0.7) 100%);
            pointer-events: none; /* 그라데이션이 다른 요소 클릭을 방해하지 않도록 설정 */
            z-index: 199; /* GNB(200) 바로 아래에 위치하도록 z-index 조정 */
        }
        /* --- GNB (Global Navigation Bar) --- */
        .gnb {
            position: fixed;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 202; /* 그라데이션(199)과 다른 모든 요소 위에 표시되도록 z-index 상향 조정 */
            opacity: 0; /* 초기에는 숨김 */
            transition: opacity 1s ease-in-out;
        }

        .gnb ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .gnb li {
            margin: 25px 0;
        }

        .gnb-link {
            display: block;
            width: 12px;
            height: 12px;
            background-color: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }

        .gnb-link.active {
            background-color: #fff;
            transform: scale(1.4);
        }

        section {
            width: 100%;
            height: 100vh; /* 각 섹션이 뷰포트 높이를 꽉 채우도록 설정 */
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed; /* 모든 섹션을 뷰포트에 고정하여 겹침 */
            top: 0;
            left: 0;
            opacity: 0; /* 기본적으로 모든 섹션을 숨김 */
            transition: opacity 1.5s ease-in-out; /* 부드러운 전환 효과 */
            pointer-events: none; /* 숨겨져 있을 때 클릭 방지 */
        }

        #intro-scene {
            position: fixed; /* 화면에 고정 */
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: 100; /* 다른 콘텐츠 위에 있도록 설정 */
            background-color: #0c0c0e;
            transition: opacity 1.5s ease-in-out; /* 부드러운 사라짐 효과 */
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 1; /* 첫 장면은 처음부터 보이도록 설정 */
            pointer-events: auto;
        }

        .text-container {
            position: relative;
            text-align: center;
            width: 80vw;
            height: 10vh;
        }

        .text-container h1 {
            font-family: 'Gowun Batang', serif;
            font-size: 3rem;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            white-space: nowrap; /* 텍스트가 줄바꿈되지 않도록 설정 */
            opacity: 0; /* 기본적으로 투명하게 설정 */
            color: #e54b4b; /* 보기 좋은 붉은색으로 변경 */
        }

        .text-1 {
            /* 2초간 나타나고, 3초 뒤에 2초간 사라짐 */
            animation: fadeIn 2s forwards, fadeOut 2s 3s forwards;
        }

        .text-2 {
            /* 5초 뒤에 2초간 나타남 */
            animation: fadeIn 2s 5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; }
        }

        /* --- Scroll-triggered Sections --- */
        #update-scene {
            flex-wrap: wrap; /* 화면이 작아질 경우 줄바꿈 허용 */
            display: flex;
            justify-content: space-between; /* 양쪽으로 콘텐츠 분리 */
            align-items: center; /* 아이템들을 수직 중앙에 정렬 */
            /* 배경 이미지 및 패럴랙스 효과 추가 */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('배경1.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* 스크롤 시 배경을 고정하여 패럴랙스 효과 생성 */

        }

        #lore-scene {
            /* 좌우 레이아웃으로 변경 */
            flex-direction: row;
            justify-content: space-between;
            padding: 5rem 2rem;
            box-sizing: border-box; /* 패딩이 높이에 포함되도록 설정 */
            /* 섹션 전체에 배경 이미지 적용 */
            background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('배경23.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* 패럴랙스 효과 추가 */
        }

        #final-scene {
            /* 섹션 전체에 배경 이미지 적용 */
            background-image: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('배경3.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* 패럴랙스 효과 추가 */
        }

        .final-text-container {
            max-width: 900px;
            text-align: center;
            padding: 2rem;
        }

        #final-scene .final-text {
            font-family: 'Gowun Batang', serif;
            font-size: 2.2rem;
            line-height: 2;
            color: #d1c4a8;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.8);
            margin: 2rem 0;
        }

        .difficulty-container {
            position: absolute;
            display: flex;
            flex-direction: column; /* 콘텐츠를 세로로 정렬 */
            justify-content: center;
            align-items: center;
            gap: 3rem;
            width: 100%;
            opacity: 0; /* 기본적으로 숨김 */
            transition: opacity 1s ease-in-out;
        }

        .entry-condition-title {
            max-height: 120px; /* '입장조건' 제목 이미지 크기 */
        }

        .entry-condition-detail {
            max-width: 1000px; /* 상세 정보 이미지 너비 */
        }

        .badges-wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 3rem;
            width: 100%;
        }

        .difficulty-image {
            max-height: 380px;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease-out, transform 1.2s ease-out;
        }

        .difficulty-image.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .content-wrapper {
            text-align: center; /* 텍스트를 중앙으로 정렬 */
            display: flex;
            flex-direction: column;
            align-items: center; /* flex 아이템들을 가로 중앙으로 정렬 */
            gap: 2rem;
            max-width: 800px;
            padding: 2rem 4rem;
            flex-basis: 60%; /* 오른쪽 콘텐츠 영역 너비를 늘려 왼쪽으로 더 이동 */
        }

        .character-image {
            flex-basis: 45%; /* 왼쪽 이미지 영역 너비 (레이아웃 비율 수정) */
            text-align: center;
        }

        .character-image img {
            max-height: 90vh;
            max-width: 100%;
            transform: scale(2.2); /* 이미지를 120% 확대하여 더 크게 보이게 함 */
        }

        /* 스크롤에 맞춰 나타나는 요소 스타일 */
        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s ease-out, transform 1.2s ease-out;
        }
        /* JavaScript로 is-visible 클래스가 추가되면 나타남 */
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        #update-scene h1, #update-scene h2, #update-scene h3, #update-scene p, .update-tag {
            text-shadow: 0 0 10px rgba(255, 200, 100, 0.3);
        }

        .title-image-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px; /* 글자 이미지 사이의 간격 */
            width: 100%;
            margin-bottom: 1rem; /* 아래 요소와의 간격 */
        }

        .title-char-image {
            max-height: 120px; /* 글자 이미지의 최대 높이 설정 */
            opacity: 0; /* 기본적으로 숨김 */
            transform: translateY(20px); /* 살짝 아래에서 시작 */
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        /* '최' 글자만 크게 만들기 */
        .title-char-image.char-choi {
            transform: scale(1.2) translateY(20px);
        }

        .update-content-image {
            max-width: 75%;
            height: auto;
            margin-top: -1rem; /* 이미지 간의 간격 미세 조정 */
        }

        #update-scene h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #c9b895;
            margin: 0;
        }

        .date-info {
            display: flex;
            justify-content: center; /* 중앙 정렬 */
            align-items: center;
            gap: 1.5rem;
            margin-top: 1rem;
        }

        #update-scene h3 {
            font-size: 1.5rem;
            margin: 0;
            letter-spacing: 2px;
        }

        .update-tag {
            background-color: #b43f3f;
            color: #fff;
            padding: 0.5rem 1.5rem;
            border-radius: 5px;
            font-weight: 700;
            letter-spacing: 3px;
        }

        .description {
            font-family: 'Gowun Batang', serif;
            font-size: 1.2rem;
            line-height: 1.8;
            max-width: 600px;
            margin: 1rem auto 0 auto; /* 중앙 정렬을 위해 margin 수정 */
        }

        .final-call {
            font-size: 1.5rem;
            font-weight: 700;
            color: #d46f6f;
            margin-top: 2rem;
        }

        .inserted-text {
            font-family: 'Gowun Batang', serif;
            font-size: 2rem;
            color: #e54b4b; /* 보기 좋은 붉은색으로 변경 */
            font-weight: 700; /* 텍스트를 굵게 처리 */
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8); /* 가독성을 위한 어두운 그림자 추가 */
            white-space: nowrap; /* 텍스트가 한 줄로 표시되도록 설정 */
            margin-top: 1rem;
        }

        .lore-container {
            max-width: 800px;
            text-align: center; /* 텍스트를 중앙 정렬로 변경 */
            /* 배경 관련 스타일을 #lore-scene으로 이동 */
            flex-basis: 50%; /* 왼쪽 텍스트 영역 너비 */
            padding-left: 5%; /* 왼쪽 여백 추가 */
        }

        #lore-scene p {
            font-family: 'Gowun Batang', serif;
            font-size: 1.5rem;
            line-height: 2;
            color: #b0b0b0;
            margin: 1.5rem 0;
        }

        #lore-scene p.highlight {
            color: #d46f6f;
            font-weight: 700;
        }

        .lore-title-image {
            max-width: 90%; /* 컨테이너에 맞춰 너비 설정 */
            height: auto;
            margin-bottom: 2rem; /* 다음 텍스트와의 간격 */
        }

        .character-image-right {
            flex-basis: 45%; /* 오른쪽 이미지 영역 너비 */
            text-align: center;
        }

        .character-image-right img {
            max-height: 90vh;
            max-width: 100%;
            transform: scale(1.5); /* 이미지 크기 조정 */
        }
    </style>
</head>
<body>
    <nav class="gnb">
        <ul>
            <li><a href="#" data-scene-index="0" class="gnb-link"></a></li>
            <li><a href="#" data-scene-index="1" class="gnb-link"></a></li>
            <li><a href="#" data-scene-index="2" class="gnb-link"></a></li>
        </ul>
    </nav>
    <section id="intro-scene">
        <div class="text-container">
            <h1 class="text-1">아크의 계승자</h1>
            <h1 class="text-2">운명이 예정한 나의 대적자여</h1>
        </div>
    </section>

    <section id="update-scene">
        <div class="character-image reveal-on-scroll">
            <img src="카제1.png" alt="카제로스">
        </div>
        <div class="content-wrapper">
            <div class="title-image-container">
                <img src="최.png" alt="최" class="title-char-image char-choi reveal-on-scroll">
                <img src="후.png" alt="후" class="title-char-image reveal-on-scroll">
                <img src="의.png" alt="의" class="title-char-image reveal-on-scroll">
                <img src="날.png" alt="날" class="title-char-image reveal-on-scroll">
            </div>
            <img src="종막.png" alt="카제로스 레이드 종막" class="update-content-image reveal-on-scroll">
            <img src="업데이트.png" alt="2025.8.20 UPDATE" class="update-content-image reveal-on-scroll">
            <img src="종막 설명.png" alt="마침내 질서의 운명을 결정지을 최후의 전투가 시작되리라" class="update-content-image reveal-on-scroll">
        </div>
    </section>

    <section id="lore-scene">
        <div class="lore-container">
            <img src="텍스트.png" alt="아주 오래전, 지금의 모든것은 예언되어었다" class="lore-title-image reveal-on-scroll is-visible">
            <p class="reveal-on-scroll is-visible">심연에서 태어나 혼돈을 짓밟고 페트라니아에 질서를 세운 자.<br>
            태초의 빛을 이용해, 세상의 법칙을 새로 쓰고자 하는 자.<br>
            운명을 정복하고 지배할 자.</p>
            <p class="reveal-on-scroll is-visible">심연의 군주이자 대악마 카제로스는 아주 오랜 시간동안<br>
            당신과 조우할 이 순간을 기다려왔습니다.</p>
            <p class="highlight reveal-on-scroll is-visible">누구도 감당하지 못할 거대한 진실을 품은 채.</p>
        </div>
        <div class="character-image-right reveal-on-scroll is-visible">
            <img src="카제2.png" alt="카제로스 2">
        </div>
    </section>

    <section id="final-scene">
        <div class="final-text-container">
            <p class="reveal-on-scroll final-text">심연의군주, 대악마, 그리고 죽음 그 자체.</p>
            <p class="reveal-on-scroll final-text">수백 년 동안 아크라시아에 공포로 군림하였던 그가<br>
            혼돈의 마녀가 남긴 예언과 루테란의 안배를 거쳐<br>
            마침내 완성된 전장에서 당신과 마주합니다.</p>
        </div>
        <div class="difficulty-container">
            <img src="입장조건.png" alt="입장조건" class="entry-condition-title difficulty-image">
            <img src="입장조건-1.png" alt="입장조건 상세" class="entry-condition-detail difficulty-image">
            <div class="badges-wrapper">
                <img src="노말.png" alt="노말" class="difficulty-image">
                <img src="하드.png" alt="하드" class="difficulty-image">
                <img src="더퍼스트.png" alt="더퍼스트" class="difficulty-image">
            </div>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const introScene = document.getElementById('intro-scene');
            const scenes = [
                document.getElementById('update-scene'),
                document.getElementById('lore-scene'),
                document.getElementById('final-scene')
            ];
            const gnb = document.querySelector('.gnb');
            const gnbLinks = document.querySelectorAll('.gnb-link');
            let currentSceneIndex = -1; // -1은 인트로 장면을 의미
            let isAnimating = false; // 애니메이션 중복 실행 방지 플래그

            // --- 1. 초기 인트로 애니메이션 처리 ---
            setTimeout(() => {
                introScene.style.opacity = '0';
                introScene.style.pointerEvents = 'none';

                // 인트로가 사라진 후 첫 번째 장면으로 전환
                setTimeout(() => {
                    changeScene(0);
                }, 1500); // 인트로 사라지는 시간과 동일
            }, 7000); // 7000 밀리초 = 7초 (text-2 애니메이션 시작 5초 + 지속 2초)

            // --- 2. 장면 전환 함수 ---
            function changeScene(newIndex, isGnbClick = false) {
                if (isAnimating || newIndex === currentSceneIndex) return;
                isAnimating = true;

                const oldIndex = currentSceneIndex;
                currentSceneIndex = newIndex;

                // GNB 가시성 제어: 인트로(-1)가 아닐 때만 GNB를 보여줌
                if (currentSceneIndex >= 0) {
                    gnb.style.opacity = '1';
                }

                // GNB 활성화 상태 업데이트
                gnbLinks.forEach(link => link.classList.remove('active'));
                if (gnbLinks[currentSceneIndex]) {
                    gnbLinks[currentSceneIndex].classList.add('active');
                }

                // 이전 장면 숨기기
                if (oldIndex !== -1) {
                    scenes[oldIndex].style.opacity = '0';
                    scenes[oldIndex].style.pointerEvents = 'none';
                    scenes[oldIndex].querySelectorAll('.reveal-on-scroll, .difficulty-image').forEach(el => el.classList.remove('is-visible'));
                }

                // 새 장면 보이기
                scenes[currentSceneIndex].style.opacity = '1';
                scenes[currentSceneIndex].style.pointerEvents = 'auto';

                // --- 장면별 애니메이션 처리 확장 ---
                const currentScene = scenes[currentSceneIndex];
                const sceneId = currentScene.id;

                // GNB 클릭 시 모든 요소를 바로 표시
                if (isGnbClick) {
                    currentScene.querySelectorAll('.reveal-on-scroll, .difficulty-image').forEach(el => el.classList.add('is-visible'));
                    if (sceneId === 'final-scene') {
                        currentScene.querySelector('.final-text-container').style.display = 'none';
                        currentScene.querySelector('.difficulty-container').style.opacity = '1';
                    }
                    isAnimating = false; // GNB 클릭 시 애니메이션 대기 시간 없음
                    return;
                }

                // 휠 스크롤 시 순차 애니메이션 적용
                if (sceneId === 'update-scene') {
                    const character = currentScene.querySelector('.character-image');
                    const contents = currentScene.querySelectorAll('.content-wrapper .reveal-on-scroll');
                    character.classList.add('is-visible');
                    setTimeout(() => {
                        contents.forEach((el, index) => {
                            setTimeout(() => el.classList.add('is-visible'), index * 300);
                        });
                    }, 800);
                } else if (sceneId === 'lore-scene') {
                    const texts = currentScene.querySelectorAll('.lore-container .reveal-on-scroll');
                    const character = currentScene.querySelector('.character-image-right');
                    texts.forEach((el, index) => {
                        setTimeout(() => el.classList.add('is-visible'), index * 1000);
                    });
                    setTimeout(() => character.classList.add('is-visible'), texts.length * 1000);
                } else if (sceneId === 'final-scene') {
                    const textContainer = currentScene.querySelector('.final-text-container');
                    const difficultyContainer = currentScene.querySelector('.difficulty-container');
                    const texts = currentScene.querySelectorAll('.final-text');
                    const difficulties = currentScene.querySelectorAll('.difficulty-image');

                    textContainer.style.display = 'block'; // 텍스트 컨테이너 다시 보이게
                    texts.forEach(el => el.classList.add('is-visible'));
                    setTimeout(() => { textContainer.style.display = 'none'; }, 4000);
                    setTimeout(() => {
                        difficultyContainer.style.opacity = '1';
                        difficulties.forEach((el, index) => { setTimeout(() => el.classList.add('is-visible'), index * 400); });
                    }, 4500);
                }

                // 애니메이션 시간 후 플래그 해제
                setTimeout(() => { isAnimating = false; }, 1800);
            }

            // --- 3. 이벤트 리스너 설정 ---
            // 마우스 휠로 장면 전환
            window.addEventListener('wheel', (event) => {
                if (currentSceneIndex < 0) return;
                const direction = event.deltaY > 0 ? 'down' : 'up';
                if (direction === 'down' && currentSceneIndex < scenes.length - 1) {
                    changeScene(currentSceneIndex + 1);
                } else if (direction === 'up' && currentSceneIndex > 0) {
                    changeScene(currentSceneIndex - 1);
                }
            });

            // GNB 클릭으로 장면 전환
            gnbLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetIndex = parseInt(e.target.dataset.sceneIndex, 10);
                    changeScene(targetIndex, true); // GNB 클릭임을 알리는 플래그 전달
                });
            });
        });
    </script>
</body>
</html>